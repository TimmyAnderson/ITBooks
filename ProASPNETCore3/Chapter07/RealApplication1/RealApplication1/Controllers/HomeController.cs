using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using RealApplication1.Models;
using RealApplication1.Models.ViewModels;
//----------------------------------------------------------------------------------------------------------------------
namespace RealApplication1.Controllers
{
//----------------------------------------------------------------------------------------------------------------------
	public sealed class HomeController : Controller
	{
//----------------------------------------------------------------------------------------------------------------------
		private readonly IStoreRepository						MRepository;
//----------------------------------------------------------------------------------------------------------------------
		private int												MPageSize;
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
		public HomeController(IStoreRepository Repository)
		{
			MRepository=Repository;
			MPageSize=4;
		}
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
		public int												PageSize
		{
			get
			{
				return(MPageSize);
			}
			set
			{
				MPageSize=value;
			}
		}
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
		public IActionResult Index(int ProductPage=1)
		{
			CProduct[]											Products=MRepository.Products.OrderBy(P => P.ProductID).Skip((ProductPage-1)*MPageSize).Take(MPageSize).ToArray();
			CPagingInfo											PagingInfo=new CPagingInfo(MRepository.Products.Count(),MPageSize,ProductPage);
			CProductsListViewModel								Model=new CProductsListViewModel(Products,PagingInfo);
			IActionResult										Result=View("Index",Model);

			return(Result);
		}
//----------------------------------------------------------------------------------------------------------------------
	}
//----------------------------------------------------------------------------------------------------------------------
}
//----------------------------------------------------------------------------------------------------------------------