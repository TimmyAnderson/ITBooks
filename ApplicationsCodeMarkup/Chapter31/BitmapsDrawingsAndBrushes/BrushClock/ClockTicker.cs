using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Windows.Threading;
//-------------------------------------------------------------------------------------------------------
namespace BrushClock
{
//-------------------------------------------------------------------------------------------------------
	// Poskytuje akualny datum a cas i s notifikaciou o zmene.
	public class ClockTicker : INotifyPropertyChanged
	{
//-------------------------------------------------------------------------------------------------------
        private string											MStrFormat="F";
//-------------------------------------------------------------------------------------------------------
        public event PropertyChangedEventHandler				PropertyChanged;
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public ClockTicker()
        {
            DispatcherTimer timer = new DispatcherTimer();
            timer.Tick += TimerOnTick;
            timer.Interval = TimeSpan.FromSeconds(0.10);
            timer.Start();
        }
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public string											DateTime
        {
            get
			{
				return(System.DateTime.Now.ToString(MStrFormat));
			}
        }
//-------------------------------------------------------------------------------------------------------
        public string											Format
        {
            get
			{
				return(MStrFormat);
			}
            set
			{
				MStrFormat=value;
			}
        }

//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        private void TimerOnTick(object Sender, EventArgs Args)
        {
            if (PropertyChanged!=null)
                PropertyChanged(this, new PropertyChangedEventArgs("DateTime"));
        }
//-------------------------------------------------------------------------------------------------------
	}
//-------------------------------------------------------------------------------------------------------
}
//-------------------------------------------------------------------------------------------------------