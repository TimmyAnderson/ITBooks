//----------------------------------------------------------------------------------------------------------------------
#pragma once
//----------------------------------------------------------------------------------------------------------------------
#include <coroutine>
#include <atomic>
#include <iostream>
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
class CTracingAwaiter final
{
//----------------------------------------------------------------------------------------------------------------------
	private:
		static std::atomic_int									MSharedValue;

	private:
		int														MID;

	public:
		bool await_ready(void);

		template<typename TPromiseType>
		void await_suspend(std::coroutine_handle<TPromiseType> Handler);

		void await_resume(void);

	public:
		CTracingAwaiter(void);
		~CTracingAwaiter(void) noexcept;
//----------------------------------------------------------------------------------------------------------------------
};
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
template<typename TPromiseType>
void CTracingAwaiter::await_suspend(std::coroutine_handle<TPromiseType> Handler)
{
	(void)Handler;

	std::wcout << L"METHOD [await_suspend] CALLED. ID [" << MID << L"]." << std::endl;
}
//----------------------------------------------------------------------------------------------------------------------