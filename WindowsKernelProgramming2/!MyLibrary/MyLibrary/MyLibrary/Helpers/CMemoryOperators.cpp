//----------------------------------------------------------------------------------------------------------------------
#include "CMemoryOperators.h"
#include "MyKernelHelpers.h"
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//#define														PRINT_LOGS
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
void* CMemoryOperators::operator new(size_t Size, POOL_FLAGS Pool)
{
	void*														Buffer=ExAllocatePool2(Pool,Size,MY_TAG);

#ifdef PRINT_LOGS
	KdPrint(("!!!!!!!!!! OPERATOR NEW - SIZE [%I64u] POOL TYPE [%I64u] BUFFER [%p] !!!\n",Size,Pool,Buffer));
#endif

	return(Buffer);
}
//----------------------------------------------------------------------------------------------------------------------
void CMemoryOperators::operator delete(void* Buffer)
{
#ifdef PRINT_LOGS
	KdPrint(("!!!!!!!!!! OPERATOR DELETE - BUFFER [%p] !!!\n",Buffer));
#endif
	
	ExFreePoolWithTag(Buffer,MY_TAG);
}
//----------------------------------------------------------------------------------------------------------------------