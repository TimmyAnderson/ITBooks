using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Threading;
//-------------------------------------------------------------------------------------------------------
namespace WPFBinding
{
//-------------------------------------------------------------------------------------------------------
	// !!! Tento objekt sluzi ako SOURCE a kedze chcem aby NOTFITIKOVAL o zmene casu, tak cas definujem ako DP.
	// !!!!! DP mozem definovat IBA V TRIEDACH dedenych z DependencyObject.
	public class CClockTicker1 : DependencyObject
	{
//-------------------------------------------------------------------------------------------------------
        public static DependencyProperty						DateTimeProperty=DependencyProperty.Register("DateTime", typeof(DateTime), typeof(CClockTicker1));
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public CClockTicker1()
        {
            DispatcherTimer			Timer=new DispatcherTimer();

            Timer.Tick+=TimerOnTick;
            Timer.Interval=TimeSpan.FromSeconds(1);
            Timer.Start();
        }
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public DateTime											DateTime
        {
            get
			{
				return((DateTime) GetValue(DateTimeProperty));
			}
            set
			{
				SetValue(DateTimeProperty, value);
			}
        }
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        private void TimerOnTick(object Sender, EventArgs Args)
        {
            DateTime=DateTime.Now;
        }
//-------------------------------------------------------------------------------------------------------
	}
//-------------------------------------------------------------------------------------------------------
}
//-------------------------------------------------------------------------------------------------------