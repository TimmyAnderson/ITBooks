using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Threading;
//-------------------------------------------------------------------------------------------------------
namespace WPFBinding
{
//-------------------------------------------------------------------------------------------------------
	public class CClockTicker2
	{
//-------------------------------------------------------------------------------------------------------
		// Ak definujem .NET property DateTime na ktoru vykonam BINDING a chcem o jej zmene postkytnut WPF notifikaciu staci definovane EVENT s menom 'DateTimeChanged' typu EventHandler a WPF sa na tento EVENT USPESNE PRIPOJI a pri jeho zavolani NACITA ZNOVA HODNOTU property.
		public event EventHandler								DateTimeChanged;
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public CClockTicker2()
        {
            DispatcherTimer			Timer=new DispatcherTimer();

            Timer.Tick+=TimerOnTick;
            Timer.Interval=TimeSpan.FromSeconds(1);
            Timer.Start();
        }
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        public DateTime											DateTime
        {
            get
			{
				return(DateTime.Now);
			}
        }
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
//-------------------------------------------------------------------------------------------------------
        private void TimerOnTick(object Sender, EventArgs Args)
        {
			if (DateTimeChanged!=null)
				DateTimeChanged(this,new EventArgs());
        }
//-------------------------------------------------------------------------------------------------------
	}
//-------------------------------------------------------------------------------------------------------
}
//-------------------------------------------------------------------------------------------------------