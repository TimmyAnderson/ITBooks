<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
	<input type="button" id="Restore" value="Restore" />
	<br />
	<canvas id="Canvas" width="600" height="600" style="border:1px solid green;"></canvas>

	<script type="text/javascript">
		window.onload=function()
		{
			var													Canvas=window.document.getElementById("Canvas");
			var													CanvasContext=Canvas.getContext("2d");
			var													Restore=window.document.getElementById("Restore");
			var													StackSize=0;

			CanvasContext.fillStyle="#F00";
			CanvasContext.strokeStyle="#0F0";
			CanvasContext.save();
			StackSize++;

			CanvasContext.fillStyle="#0F0";
			CanvasContext.strokeStyle="#00F";
			CanvasContext.save();
			StackSize++;

			CanvasContext.fillStyle="#00F";
			CanvasContext.strokeStyle="#F00";
			CanvasContext.save();
			StackSize++;

			// !!! Zacina sa PATH.
			CanvasContext.beginPath();

			// !!! Zacina sa SUBPATH.
			CanvasContext.moveTo(100,100);
			CanvasContext.lineTo(200,100);
			CanvasContext.lineTo(200,200);
			CanvasContext.closePath();

			CanvasContext.fillStyle="#FF0";
			CanvasContext.strokeStyle="#FF0";

			CanvasContext.stroke();
			CanvasContext.fill();

			Restore.onclick=function()
			{
				if (StackSize==0)
				{
					return;
				}

				StackSize--;

				// !!! Zacina sa PATH.
				CanvasContext.beginPath();

				// !!! Zacina sa SUBPATH.
				CanvasContext.moveTo(100,100);
				CanvasContext.lineTo(200,100);
				CanvasContext.lineTo(200,200);
				CanvasContext.closePath();

				CanvasContext.restore();

				CanvasContext.stroke();
				CanvasContext.fill();
			}
		}
	</script>
</body>
</html>