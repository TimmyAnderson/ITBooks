//----------------------------------------------------------------------------------------------------------------------
#pragma once
//----------------------------------------------------------------------------------------------------------------------
#include <ntddk.h>
#include "Helpers\CMutexGlobal.h"
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
struct SFileContext final
{
//----------------------------------------------------------------------------------------------------------------------
	public:
		// !!!!! Pouzitie klasickeho MUTEX namiesto FAST MUTEX je NUTNE. Je to preto, lebo FAST MUTEX dviha IRQL na IRQL [IRQL=APC_LEVEL], co by pri vykonavani IO OPERATIONS, ktore su ukoncovane pri IRQL [IRQL=APC_LEVEL] sposobilo DEADLOCK.
		CMutexGlobal											MLock;
		LARGE_INTEGER											MBackupTime;
		BOOLEAN													MWritten;
//----------------------------------------------------------------------------------------------------------------------
};
//----------------------------------------------------------------------------------------------------------------------