using System;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Http;
//----------------------------------------------------------------------------------------------------------------------
namespace ASPCoreFundamentals2
{
//----------------------------------------------------------------------------------------------------------------------
	public sealed class CMyCustomMiddlewareClasses
	{
//----------------------------------------------------------------------------------------------------------------------
		private readonly RequestDelegate						MNext;
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
		// !!! CUSTOM MIDDLEWARE COMPONENT CLASS MUSI mat PUBLIC CONTRUCTOR, ktora ma 1. PARAMETER TYPE [RequestDelegate].
		public CMyCustomMiddlewareClasses(RequestDelegate Next)
		{
			MNext=Next;
		}
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
		// !!! CUSTOM MIDDLEWARE COMPONENT CLASS MUSI mat definovanu PUBLIC METHOD [Task InvokeAsync(HttpContext Context)].
		public async Task InvokeAsync(HttpContext Context)
		{
			string												MethodName=nameof(InvokeAsync);

			Console.WriteLine($"CLASS MIDDLEWARE [{MethodName}] - START.");

			// !!! Zavola sa MIDDLEWARE COMPONENT NIZSIE v REQUEST PIPELINE.
			await MNext(Context);

			Console.WriteLine($"CLASS MIDDLEWARE [{MethodName}] - STOP.");
		}
//----------------------------------------------------------------------------------------------------------------------
	}
//----------------------------------------------------------------------------------------------------------------------
}
//----------------------------------------------------------------------------------------------------------------------