//----------------------------------------------------------------------------------------------------------------------
#include "KernelHeaders.h"
#include "SQueuedSpinLock.h"
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
namespace KTL
{
//----------------------------------------------------------------------------------------------------------------------
	void SQueuedSpinLock::Init(void)
	{
		KeInitializeSpinLock(&MLock);
	}
//----------------------------------------------------------------------------------------------------------------------
	void SQueuedSpinLock::Lock(void)
	{
		KeAcquireInStackQueuedSpinLock(&MLock,&MHandle);
	}
//----------------------------------------------------------------------------------------------------------------------
	void SQueuedSpinLock::Unlock(void)
	{
		KeReleaseInStackQueuedSpinLock(&MHandle);
	}
//----------------------------------------------------------------------------------------------------------------------
}
//----------------------------------------------------------------------------------------------------------------------