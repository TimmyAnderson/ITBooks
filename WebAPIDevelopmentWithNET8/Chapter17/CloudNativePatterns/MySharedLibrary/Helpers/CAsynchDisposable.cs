using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
//--------------------------------------------------------------------------------------------------------------------------------
namespace MySharedLibrary
{
//--------------------------------------------------------------------------------------------------------------------------------
	public sealed class CAsynchDisposable<TAsynchDisposable> : IDisposable where TAsynchDisposable : IAsyncDisposable
	{
//--------------------------------------------------------------------------------------------------------------------------------
		private readonly TAsynchDisposable						MObject;
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
		public CAsynchDisposable(TAsynchDisposable Object)
		{
			MObject=Object;
		}
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
		public TAsynchDisposable								Object
		{
			get
			{
				return(MObject);
			}
		}
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
		public static implicit operator TAsynchDisposable(CAsynchDisposable<TAsynchDisposable> Value)
		{
			return(Value.Object);
		}
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------------------------------------
		public void Dispose()
		{
			MObject.DisposeAsync().AsTask().Wait();
		}
//--------------------------------------------------------------------------------------------------------------------------------
	}
//--------------------------------------------------------------------------------------------------------------------------------
}
//--------------------------------------------------------------------------------------------------------------------------------